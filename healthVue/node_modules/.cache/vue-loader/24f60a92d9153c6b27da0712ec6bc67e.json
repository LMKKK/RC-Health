{"remainingRequest":"F:\\Projects\\Vue\\healthVue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\Projects\\Vue\\healthVue\\src\\views\\checkItemsData.vue?vue&type=style&index=0&id=8d4b3a08&scoped=true&lang=css","dependencies":[{"path":"F:\\Projects\\Vue\\healthVue\\src\\views\\checkItemsData.vue","mtime":1687507003321},{"path":"F:\\Projects\\Vue\\healthVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1687062833539},{"path":"F:\\Projects\\Vue\\healthVue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1687062920062},{"path":"F:\\Projects\\Vue\\healthVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1687062847882},{"path":"F:\\Projects\\Vue\\healthVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1687062820333},{"path":"F:\\Projects\\Vue\\healthVue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1687062902422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiNjb250ZW50IHsKICBtYXJnaW46IDAgYXV0bzsKICBwYWRkaW5nOiAwOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICB3aWR0aDogMTAwJTsKICBjb2xvcjogYmxhY2s7Cn0KCi50YWJsZUluZGV4IHsKICB3aWR0aDogMTAwJTsKICBtYXJnaW46IDAgYXV0bzsKICBwYWRkaW5nOiAwOwp9CgojdGFibGUgewogIHdpZHRoOiA5MCU7CiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsKICBib3JkZXItc3BhY2luZzogMTBweCAyMHB4OwogIGNhcHRpb24tc2lkZTogYm90dG9tOwogIG1hcmdpbjogMCBhdXRvOwogIHBhZGRpbmc6IDA7CiAgdGFibGUtbGF5b3V0OiBhdXRvOwp9CgojYmlhb3podSB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIHdpZHRoOiAxMDAwcHg7CiAgaGVpZ2h0OiAxMC40cHg7CiAgZmxvYXQ6IHJpZ2h0OwogIHRleHQtYWxpZ246IGxlZnQ7CiAgbWFyZ2luOiAwcHg7Cn0KCiNiaWFvemh1IHVsIHsKICBwYWRkaW5nLWxlZnQ6IDQwcHg7CiAgbWFyZ2luLXRvcDogNXB4Owp9CgojYmlhb3podSB1bCBsaSB7CiAgbGlzdC1zdHlsZTogbm9uZTsKICB3aWR0aDogMjQwcHg7CiAgZmxvYXQ6IGxlZnQ7CiAgbGluZS1oZWlnaHQ6IDEwLjRweDsKfQoKdGFibGUgdHIgdGQgewogIGhlaWdodDogMzBweDsKICBsaW5lLWhlaWdodDogMzBweDsKfQo="},{"version":3,"sources":["F:\\Projects\\Vue\\healthVue\\src\\views\\checkItemsData.vue"],"names":[],"mappings":"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","file":"F:/Projects/Vue/healthVue/src/views/checkItemsData.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n    <!--    搜索区域-->\n    <div style=\"margin: 10px 0\">\n      <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%\" clearable></el-input>\n      <el-button style=\"margin-left: 5px\" @click=\"load\">查询</el-button>\n      \n    </div>\n    <el-table v-loading=\"loading\" :data=\"tableData\" border stripe style=\"width: 100%\">\n      <el-table-column type=\"index\" label=\"序号\" sortable align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"appointmentPeople\" label=\"预约人\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"appointmentTime\" label=\"预约时间\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"mealName\" label=\"所选套餐\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"remark\" label=\"说明\" align=\"center\">\n      </el-table-column>\n\n      <el-table-column label=\"操作\" align=\"center\" width=\"280\">\n        <template #default=\"scope\">\n          <el-button v-if=\"loginUser.roles[0]==3\" size=\"mini\" type=\"primary\" @click=\"handleEdit(scope.row)\">录入/修改</el-button>\n          <el-button size=\"mini\"  @click=\"viewReport(scope.row)\">查看体检报告</el-button>\n          <!-- <el-popconfirm title=\"确定删除吗？\" @confirm=\"handleDelete(scope.row.id)\">\n            <template #reference>\n              <el-button size=\"mini\" type=\"danger\">取消</el-button>\n            </template>\n          </el-popconfirm> -->\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div style=\"margin: 10px 0\">\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\"\n        :page-sizes=\"[5, 10, 20]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\n      </el-pagination>\n    </div>\n\n    <el-dialog title=\"每项体检信息\" v-model=\"dialogVisible\" style=\"width: 50%; margin: 0 auto 50px;\">\n\n      <el-form :model=\"ruleForm\" label-width=\"120px\" :rules=\"rules\" ref=\"ruleForm\">\n        <el-form-item label=\"体检套餐\" prop=\"appointmentTime\">\n          <el-input disabled v-model=\"ruleForm.mealName\" style=\"width: 40%;\"></el-input>\n          <label style=\"margin-left: 3%;\">体检人：</label>\n          <el-input disabled v-model=\"ruleForm.appointmentPeople\" style=\"width: 40%;\"></el-input>\n        </el-form-item>\n        <div  v-for=\"(item, index) in itemsListData\" :key=\"index\">\n          <el-form-item label=\"体检组\" prop=\"groupName\">\n            <el-input disabled v-model=\"item.groupName\" style=\"width: 30%;\"></el-input>\n            <label style=\"margin-left: 3%;\">体检项：</label>\n            <el-input disabled  v-model=\"item.itemName\" style=\"width: 20%;\"></el-input>\n            <label style=\"margin-left: 3%;\">数值：</label>\n            <el-input :disabled=\"!saveShow\" v-model=\"item.itemValue\" style=\"width: 20%;\"></el-input>\n          </el-form-item>\n        </div>\n      </el-form>\n\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\n          <el-button v-show=\"saveShow\" type=\"primary\" @click=\"save('ruleForm')\">确 定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n\n    <el-dialog title.sync=\"title\" width=\"1000px\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\"\n             @close=\"close\" top=\"10vh\"\n              v-model=\"reportVisible\">\n    <el-form :model=\"reportObj\" v-loading=\"loading\" :rules=\"rules\" ref=\"reportObj\" label-suffix=\"\" class=\"demo-ruleForm\"\n             label-width=\"160px\" size=\"small\" style=\"width: 100%\"\n    >\n      <div id=\"content\">\n        <div class=\"tableIndex\">\n          <h2>{{reportObj.tableName}}</h2>\n          <br/>\n          <table border=\"1\" id=\"table\">\n            <tr>\n              <th colspan=\"8\"><h3>用户体检报告</h3></th>\n            </tr>\n            <tr >\n              <th width=\"10%\">用户姓名</th>\n              <td colspan=\"2\">{{ reportObj.userName }}</td>\n              <th width=\"10%\">性别</th>\n              <td colspan=\"1\"> {{ reportObj.sex }}</td>\n              <th width=\"10%\">年龄</th>\n              <td colspan=\"3\"> {{ reportObj.age }}</td>\n            </tr>\n            <tr >\n              <th width=\"10%\">检查时间</th>\n              <td colspan=\"2\">{{ reportObj.appointmentTime }}</td>\n              <th width=\"10%\">所用套餐</th>\n              <td colspan=\"4\"> {{ reportObj.mealName }}</td>\n              \n            </tr>\n            <tr>\n              <th  colspan=\"1\">序号</th>\n              <th  colspan=\"2\">检查项</th>\n              <th  colspan=\"6\">检查结果</th>\n            </tr>\n\n            <tr id=\"list\" v-for=\"(tableInfo,index) in tableDataList\" :key=\"tableInfo.id\">\n              <td colspan=\"1\">{{index+1}}</td>\n              <td colspan=\"2\">{{tableInfo.itemName}}</td>\n              <td colspan=\"6\">{{tableInfo.itemValue}}</td>\n            </tr>\n          </table>\n        </div>\n      </div>\n    </el-form>\n    \n  </el-dialog>\n\n\n\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\nimport moment from \"moment\"\nlet editor;\n\nexport default {\n  name: 'checkSetMeal',\n  components: {},\n  data() {\n    return {\n      loading: true,\n      ruleForm: {},\n      dialogVisible: false,\n      search: '',\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      tableData: [],\n      vis: false,\n      detail: {},\n      rules: {\n        appointmentTime: [{ required: true, message: '请选择预约体检时间', trigger: 'blur' }],\n        mealId: [{ required: true, message: '请选择体检套餐', trigger: 'blur' }],\n      },\n      multipleSelection: [],\n      itemsListData: [],\n      mealOptions:[],\n      loginUser:{},\n      saveShow:true,\n      reportObj:{},\n      tableDataList:[],\n      reportVisible:false,\n    }\n  },\n  created() {\n    let userStr = sessionStorage.getItem(\"user\") || \"{}\"\n    this.loginUser = JSON.parse(userStr)\n    console.log(\"当前登陆者信息：\",this.loginUser);\n    this.load();\n    \n  },\n  methods: {\n    filesUploadSuccess(res) {\n      console.log(res)\n      this.ruleForm.cover = res.data\n    },\n    load() {\n      this.loading = true;\n      let params={\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          search: this.search\n      };\n      if(this.loginUser.roles[0]==2){\n        params.userId=this.loginUser.id;\n      }\n      request.get(\"/appointment\", {\n        params: params\n      }).then(res => {\n        this.loading = false\n        this.tableData = res.data.records\n        this.total = res.data.total\n      })\n    },\n    add() {\n      this.dialogVisible = true\n      this.ruleForm = {}\n\n\n\n    },\n    save(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.ruleForm.id) {  // 更新\n            let params = JSON.parse(JSON.stringify(this.ruleForm));\n            params.checkItemsListData=this.itemsListData;\n            console.log(\"this.itemsListData::\", this.itemsListData);\n            console.log(\"提交的参数信息：：\", params);\n            //return;\n            request.post(\"/checkItemsData/batchSaveCheckItemsData\", params).then(res => {\n              console.log(res)\n              if (res.code === '0') {\n                this.$message({\n                  type: \"success\",\n                  message: \"操作成功\"\n                })\n              } else {\n                this.$message({\n                  type: \"error\",\n                  message: res.msg\n                })\n              }\n              this.load() // 刷新表格的数据\n              this.dialogVisible = false  // 关闭弹窗\n            })\n          } else {  // 新增\n            let userStr = sessionStorage.getItem(\"user\") || \"{}\"\n            let user = JSON.parse(userStr)\n            this.ruleForm.createPeople = user.nickName;\n            this.ruleForm.appointmentPeople = user.nickName\n            this.ruleForm.appointmentTime = moment(this.ruleForm.appointmentTime).format('YYYY-MM-DD HH:mm:ss');\n              \n            console.log(\"this.ruleForm::\", this.ruleForm);\n            console.log(\"this.itemsListData::\", this.itemsListData);\n            return;\n            request.post(\"/appointment\", this.ruleForm).then(res => {\n              console.log(res)\n              if (res.code === '0') {\n                this.$message({\n                  type: \"success\",\n                  message: \"新增成功\"\n                })\n              } else {\n                this.$message({\n                  type: \"error\",\n                  message: res.msg\n                })\n              }\n\n              this.load() // 刷新表格的数据\n              this.dialogVisible = false  // 关闭弹窗\n            })\n          }\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n\n\n\n    },\n    handleEdit(row) {\n      console.log(\"row::\", row);\n      this.saveShow=true;\n      this.ruleForm = JSON.parse(JSON.stringify(row));\n      this.ruleForm.dutyDoctorId = this.loginUser.id;\n      this.ruleForm.appointmentId = row.id;\n      \n      console.log(\"this.ruleForm::\", this.ruleForm);\n      this.dialogVisible = true\n      request.post(\"/checkItemsData/getItemsListByPre\", this.ruleForm).then(res => {\n        console.log(res)\n        //return\n        this.itemsListData = res.data;\n      })\n    },\n    handleShow(row) {\n      this.saveShow=false;\n      console.log(\"row::\", row);\n      this.ruleForm = JSON.parse(JSON.stringify(row));\n      this.ruleForm.dutyDoctorId = this.loginUser.id;\n      this.ruleForm.appointmentId = row.id;\n      \n      console.log(\"this.ruleForm::\", this.ruleForm);\n      this.dialogVisible = true\n      request.post(\"/checkItemsData/getItemsListByPre\", this.ruleForm).then(res => {\n        console.log(res)\n        //return\n        this.itemsListData = res.data;\n      })\n\n    },\n    handleSizeChange(pageSize) {   // 改变当前每页的个数触发\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum) {  // 改变当前页码触发\n      this.currentPage = pageNum\n      this.load()\n    },\n    toggleSelection(rows) {\n      console.log(rows);\n      if (rows) {\n        rows.forEach(row => {\n          this.$refs.multipleTable.toggleRowSelection(row);\n        });\n      } else {\n        this.$refs.multipleTable.clearSelection();\n      }\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    viewReport(row){\n      \n      console.log(\"报告信息：：\",row);\n      //this.reportObj=row;\n      request.post(\"/checkItemsData/getCheckReportByUser\", row).then(res => {\n        console.log(res)\n        //return\n        //this.itemsListData = res.data;\n        if(res.data.user){\n          this.reportObj.userName=res.data.user.nickName;\n          this.reportObj.sex=res.data.user.sex;\n          this.reportObj.age=res.data.user.age;\n        }\n        this.reportObj.appointmentTime=row.appointmentTime;\n        this.reportObj.mealName=row.mealName;\n         \n        this.tableDataList=res.data.itemsDataList;\n        this.reportVisible=true;\n      })\n    }\n  }\n}\n</script>\n<style type=\"text/css\" scoped>\n#content {\n  margin: 0 auto;\n  padding: 0;\n  text-align: center;\n  width: 100%;\n  color: black;\n}\n\n.tableIndex {\n  width: 100%;\n  margin: 0 auto;\n  padding: 0;\n}\n\n#table {\n  width: 90%;\n  border-collapse: collapse;\n  border-spacing: 10px 20px;\n  caption-side: bottom;\n  margin: 0 auto;\n  padding: 0;\n  table-layout: auto;\n}\n\n#biaozhu {\n  text-decoration: none;\n  width: 1000px;\n  height: 10.4px;\n  float: right;\n  text-align: left;\n  margin: 0px;\n}\n\n#biaozhu ul {\n  padding-left: 40px;\n  margin-top: 5px;\n}\n\n#biaozhu ul li {\n  list-style: none;\n  width: 240px;\n  float: left;\n  line-height: 10.4px;\n}\n\ntable tr td {\n  height: 30px;\n  line-height: 30px;\n}\n</style>\n"]}]}